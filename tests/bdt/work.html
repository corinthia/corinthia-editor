<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style>

</style>
<script src="../../first.js"></script>
<script src="../../AutoCorrect.js"></script>
<script src="../../Clipboard.js"></script>
<script src="../../Cursor.js"></script>
<script src="../../DOM.js"></script>
<script src="../../Editor.js"></script>
<script src="../../Equations.js"></script>
<script src="../../Figures.js"></script>
<script src="../../Formatting.js"></script>
<script src="../../Hierarchy.js"></script>
<script src="../../Lists.js"></script>
<script src="../../Main.js"></script>
<script src="../../NodeSet.js"></script>
<script src="../../Outline.js"></script>
<script src="../../Position.js"></script>
<script src="../../PostponedActions.js"></script>
<script src="../../Preview.js"></script>
<script src="../../Range.js"></script>
<script src="../../Selection.js"></script>
<script src="../../StringBuilder.js"></script>
<script src="../../Styles.js"></script>
<script src="../../Tables.js"></script>
<script src="../../UndoManager.js"></script>
<script src="../../Viewport.js"></script>
<script src="../../traversal.js"></script>
<script src="../../types.js"></script>
<script src="../../util.js"></script>
<script src="../PrettyPrinter.js"></script>
<script src="../testlib.js"></script>
<script src="common.js"></script>
<script>

function print(str)
{
    var pre = DOM_createElement(document,"PRE");
    var text = DOM_createTextNode(document,str);
    DOM_appendChild(pre,text);
    DOM_appendChild(document.body,pre);
}

function debug(str)
{
    console.log(str);
}

function transform(a)
{
//    DOM_insertBefore(a,a.childNodes[5],a.childNodes[0]);
//    debug(a.childNodes[1].firstChild.nodeValue);
//    DOM_setNodeValue(a.childNodes[1].firstChild,"The BBC");

    DOM_insertBefore(a,createListItem("Test 2"),a.childNodes[5]);
    DOM_insertBefore(a,createListItem("Test 1"),a.childNodes[2]);
}

function main()
{
    DOM_assignNodeIds(document.documentElement);

    var concrete = readXML("bookmarks.xml");
    removeWhitespaceAndCommentNodes(concrete.documentElement);
    print(PrettyPrinter.getHTML(concrete.documentElement));
    print("----------------------------------");

    var abs = Bookmarks_get(concrete.documentElement);
    print(PrettyPrinter.getHTML(abs));
    print("----------------------------------");

    transform(abs);
    print(PrettyPrinter.getHTML(abs));
    print("----------------------------------");

    Bookmarks_put(abs,concrete.documentElement);
    print(PrettyPrinter.getHTML(concrete.documentElement));
    print("----------------------------------");

    var newAbs = Bookmarks_get(concrete.documentElement);
    print("Compare matches? "+compare(abs,newAbs));
}

</script>
</head>
<body onload="main()">

</body>
</html>
