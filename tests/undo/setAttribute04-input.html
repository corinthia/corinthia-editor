<!DOCTYPE html>
<html>
<head>
<script language="javascript">
function performTest()
{
    Outline_init();
    Styles_init();
    PostponedActions_perform();

    var versions = new Array();
    var img = document.getElementsByTagName("IMG")[0];
    versions.push(DOM_cloneNode(img,true));

    DOM_setAttribute(img,"width","300");
    versions.push(DOM_cloneNode(img,true));
    UndoManager_newGroup();

    DOM_setAttribute(img,"height","200");
    versions.push(DOM_cloneNode(img,true));
    UndoManager_newGroup();

    DOM_setAttribute(img,"alt","An image");
    versions.push(DOM_cloneNode(img,true));
    UndoManager_newGroup();

    DOM_setAttribute(img,"width","400");
    versions.push(DOM_cloneNode(img,true));
    UndoManager_newGroup();

    DOM_setAttribute(img,"height","300");
    versions.push(DOM_cloneNode(img,true));
    UndoManager_newGroup();

    DOM_removeAttribute(img,"width");
    versions.push(DOM_cloneNode(img,true));
    UndoManager_newGroup();

    DOM_removeAttribute(img,"height");
    versions.push(DOM_cloneNode(img,true));
    UndoManager_newGroup();

    DOM_removeAttribute(img,"alt");
    versions.push(DOM_cloneNode(img,true));
//    UndoManager_newGroup();

    for (var i = 0; i < 8; i++) {
        UndoManager_undo();
        versions.push(DOM_cloneNode(img,true));
    }

    for (var i = 0; i < 8; i++) {
        UndoManager_redo();
        versions.push(DOM_cloneNode(img,true));
    }

    for (var i = 0; i < 8; i++) {
        UndoManager_undo();
        versions.push(DOM_cloneNode(img,true));
    }

    DOM_deleteAllChildren(document.body);
    for (var i = 0; i < versions.length; i++)
        DOM_appendChild(document.body,versions[i]);
}
</script>
</head>
<body>
<img src="first.png">
</body>
</html>
