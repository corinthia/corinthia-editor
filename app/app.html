<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<style>
#content {
    width: 800px;
    height: 500px;
    left: 20px;
    top: 80px;
    border: 1px solid black;
    position: absolute;
}
</style>
<script>
"use strict";

var api;

function insertPressed() {
    api.cursor.insertCharacter("X");
}

function deletePressed() {
    api.cursor.deleteCharacter();
}

function start(theAPI) {
    api = theAPI;
    console.log("in start");
    api.main.init(768,100,null);
    api.cursor.moveToStartOfDocument();
}

function contentLoaded() {
    console.log("Content loaded");

    var iframe = document.getElementById("content");
    iframe.contentWindow.apiLoadedCallback = start;
    var requireScript = iframe.contentDocument.createElement("script");
    requireScript.src = "require.js";
    requireScript.setAttribute("src","../demo/require.js");
    requireScript.setAttribute("data-main","iframe-code");
    requireScript.addEventListener("load",function(){
        console.log("require.js loaded in content iframe");
    });
    iframe.contentDocument.body.appendChild(requireScript);
}

</script>
</head>
<body>
    <input type="button" value="Insert" onclick="insertPressed()">
    <input type="button" value="Delete" onclick="deletePressed()">

    <iframe id="content" src="content.html" frameborder="0" onload="contentLoaded()"></iframe>
</body>
</html>
